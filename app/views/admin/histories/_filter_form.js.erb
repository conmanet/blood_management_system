$(function() {
  $(".date-picker").datetimepicker({
    useCurrent: false,
    format: "YYYY/MM/DD"
  });

  $(".dp-1").on("dp.change", function(e) {
    $(".dp-2").data("DateTimePicker").minDate(e.date);
  });

  $(".dp-2").on("dp.change", function(e) {
    $(".dp-1").data("DateTimePicker").maxDate(e.date);
  });

  $(".date-picker").on("dp.change", submit_via_ajax);

  function submit_via_ajax() {
    var form = $("#admin-search");
    var submiting = $.get(form.attr("action"), form.serialize(), null, "script");
    submiting.error(function() {
      showNotification("Error " + e.status + ": " + e.statusText + ".", "danger");
    });
  }
});
