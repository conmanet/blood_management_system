<%= form_for user, url: admin_histories_path do |f| %>
  <%= f.hidden_field :id %>
  <div class="error-messages">
    <%= render "shared/error_messages", object: f.object %>
  </div>
  <div class="row">
    <div class="col-md-6">
      <div class="form-group label-floating">
        <%= f.label :name, "Họ và tên", class: "control-label" %>
        <%= f.text_field :name, class: "form-control",
          disabled: is_disabled_field?(f.object, :name) %>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group label-floating">
        <%= f.label :email, "Email", class: "control-label" %>
        <%= f.email_field :email, class: "form-control",
          disabled: is_disabled_field?(f.object, :email) %>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-3">
      <div class="form-group label-floating">
        <%= f.label :gender, "Giới tính", class: "control-label" %>
        <%= f.select :gender, user_form.genders, {}, class: "form-control",
          disabled: is_disabled_field?(f.object, :gender) %>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group label-floating">
        <%# f.label :birthday, "", class: "control-label" %>
        <%= f.text_field :birthday, class: "form-control date-picker",
          disabled: is_disabled_field?(f.object, :birthday), placeholder: "Ngày sinh" %>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group label-floating">
        <%= f.label :id_number, "Số CMND", class: "control-label" %>
        <%= f.text_field :id_number, class: "form-control",
          disabled: is_disabled_field?(f.object, :id_number) %>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group label-floating">
        <%= f.label :phone_number, "Số điện thoại", class: "control-label" %>
        <%= f.text_field :phone_number, class: "form-control",
          disabled: is_disabled_field?(f.object, :phone_number) %>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="form-group label-floating">
        <%= f.label :address, "Địa chỉ", class: "control-label" %>
        <%= f.text_field :address, class: "form-control lp-input select-on-focus",
          disabled: is_disabled_field?(f.object, :address) %>
          <span class="form-control-addon toggle-maps show-maps">
            <i class="material-icons">my_location</i>
          </span>
        <%= f.hidden_field :lat, class: "lp-lat" %>
        <%= f.hidden_field :lon, class: "lp-lon" %>
      </div>
    </div>
    <div class="col-md-12 maps">
      <div class="col-md-12 location-picker" style="height: 500px;"></div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-2">
      <div class="form-group label-floating">
        <%= f.label :blood_type, "Nhóm máu", class: "control-label" %>
        <%= f.select :blood_type, user_form.blood_types, {}, class: "form-control",
          disabled: is_disabled_field?(f.object, :blood_type) %>
      </div>
    </div>
    <%= f.fields_for :histories do |field| %>
      <% unless field.object.persisted? %>
        <div class="col-md-2">
          <div class="form-group label-floating">
            <%= field.label :volume, "Số lượng", class: "control-label" %>
            <%= field.select :volume, history_form.volumes, {}, class: "form-control" %>
          </div>
        </div>
        <div class="col-md-2">
          <div class="form-group label-floating">
            <%= field.label :date, "Ngày", class: "control-label" %>
            <%= field.text_field :date, class: "form-control",
              value: l(Date.current, format: :default_date), readonly: true %>
          </div>
        </div>
        <div class="col-md-6">
          <div class="form-group label-floating">
            <%= field.label :place_id, "Địa điểm", class: "control-label" %>
            <%= field.select :place_id, history_form.places, {}, class: "form-control" %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="row">
    <div class="col-md-12">
      <%= f.button "Lưu", class: "btn btn-primary pull-right" %>
    </div>
  </div>
<% end %>

<%= content_for :specific_page_js do %>
  <%= javascript_include_tag "locationpicker/locationpicker.jquery.min.js" %>
  <script type="text/javascript">
    <%= render "shared/date_picker.js" %>
    <%= render "shared/location-picker.js" %>
    <%= render "user_history_form.js" %>
  </script>
<% end %>
