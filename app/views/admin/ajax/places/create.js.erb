<% if @place.errors.any? %>
  $(".error-msg-wrapper").html("<%= j render 'shared/error_messages', object: @place %>");
<% else %>
  $(".error-msg-wrapper").html("");
  var opt_text = "<%= @place.name + ' - ' + @place.address %>";
  var opt_value = <%= @place.id %>;
  var option = new Option(opt_text, opt_value);
  var select2_id = "";
  switch (true) {
    case ($("form.new_event").length > 0) || ($("form.edit_event").length > 0):
      select2_id = "#event-place-id";
      break;
    case ($("form.new_user").length > 0):
      select2_id = "#user-history-place-id";
      break;
  }
  $(select2_id).append(option);
  $(select2_id).val(opt_value).trigger("change");
  $("#register-place-modal").modal("hide");
<% end %>
